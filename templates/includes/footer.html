{% load static %}
{% now "Y" as current_year %}

{% url 'home' as home_url %}
{% url 'register' as register_url %}
{% url 'profile_edit' as profile_edit_url %}
{% url 'kyc_submit' as kyc_submit_url %}

<footer class="s4l-footer">
  <div class="s4l-footer-cta">
    <div class="container d-flex flex-wrap justify-content-between align-items-center py-3">
      <div class="text-white">
        {% if user.is_authenticated %}
          <div class="font-weight-bold" style="font-size:18px;">Keep your account ready for emergencies</div>
          <div style="opacity:0.95;">Complete profile & KYC for faster matching.</div>
        {% else %}
          <div class="font-weight-bold" style="font-size:18px;">Join the Lifesavers Community</div>
          <div style="opacity:0.95;">Register today to become a donor and save lives in your area.</div>
        {% endif %}
      </div>

      <div class="mt-3 mt-md-0">
        {% if user.is_authenticated %}
          {% if not user.is_verified and kyc_submit_url %}
            <a href="{{ kyc_submit_url }}" class="btn btn-light font-weight-bold" style="color: var(--secondary-color);">
              <i class="fa fa-id-card mr-1"></i> Complete KYC
            </a>
          {% elif profile_edit_url %}
            <a href="{{ profile_edit_url }}" class="btn btn-light font-weight-bold" style="color: var(--secondary-color);">
              <i class="fa fa-edit mr-1"></i> Update Profile
            </a>
          {% endif %}
        {% else %}
          {% if register_url %}
            <a href="{{ register_url }}" class="btn btn-light font-weight-bold" style="color: var(--secondary-color);">
              Register as Donor
            </a>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>

  <div class="s4l-footer-main">
    <div class="container py-4">
      <div class="row">

        <div class="col-lg-4 col-md-6 mb-4">
          <a href="{{ home_url|default:'/' }}" class="d-inline-flex align-items-center mb-2" style="text-decoration:none;">
            {% if site_settings and site_settings.site_logo %}
              <img src="{{ site_settings.site_logo.url }}" alt="{{ site_settings.site_name|default:'Share4Life' }}"
                   style="height:64px; width:auto;">
            {% else %}
              <div class="text-white" style="font-weight:900; font-size:22px;">
                <i class="fa fa-heartbeat text-danger mr-2"></i>Share<span class="text-danger">4</span>Life
              </div>
            {% endif %}
          </a>

          <p class="mb-3" style="opacity:.9;">
            {{ site_settings.footer_text|default:"Saving Lives, One Donation at a Time." }}
          </p>
        </div>

        <div class="col-lg-2 col-md-6 mb-4">
          <div class="s4l-footer-title">Quick Links</div>
          <ul class="s4l-footer-links">
            <li><a href="{{ home_url|default:'/' }}">Home</a></li>
            <li><a href="#">Find Blood</a></li>
            <li><a href="#">Crowdfunding</a></li>
            <li><a href="#">Hospitals</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-6 mb-4">
          <div class="s4l-footer-title">Support</div>
          <ul class="s4l-footer-links">
            <li><a href="#" data-toggle="modal" data-target="#privacyModal">Privacy</a></li>
            <li><a href="#" data-toggle="modal" data-target="#termsModal">Terms</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>

        <div class="col-lg-4 col-md-6 mb-4">
          <div class="s4l-footer-title">Contact</div>
          <div class="mb-2"><i class="fas fa-phone mr-2"></i>{{ site_settings.contact_phone|default:"+977-9800000000" }}</div>
          <div class="mb-2"><i class="fas fa-envelope mr-2"></i>{{ site_settings.contact_email|default:"support@share4life.com" }}</div>
          <div class="mb-2"><i class="fas fa-map-marker-alt mr-2"></i>{{ site_settings.address|default:"Kathmandu, Nepal" }}</div>
        </div>

      </div>
    </div>
  </div>

  <div class="s4l-footer-bottom">
    <div class="container py-3 d-flex flex-wrap justify-content-between align-items-center">
      <div>&copy; {{ current_year }} {{ site_settings.site_name|default:"Share4Life" }}. All rights reserved.</div>
      <div>
        <a href="#" data-toggle="modal" data-target="#privacyModal">Privacy</a>
        <a href="#" data-toggle="modal" data-target="#termsModal" class="ml-3">Terms</a>
      </div>
    </div>
  </div>
</footer>

<style>
  .s4l-footer { margin-top: 50px; }
  .s4l-footer-cta { background: var(--secondary-color); }
  .s4l-footer-main { background: #2e4a7e; color: rgba(255,255,255,0.88); }
  .s4l-footer-bottom { background: #071b3f; color: rgba(255,255,255,0.75); }

  .s4l-footer-title { color:#fff; font-weight:800; margin-bottom: 12px; }

  .s4l-footer-links { list-style:none; padding:0; margin:0; }
  .s4l-footer-links li { margin-bottom: 8px; }
  .s4l-footer-links a { color: rgba(255,255,255,0.82); text-decoration:none; }
  .s4l-footer-links a:hover { color:#fff; text-decoration: underline; }

  .s4l-footer-bottom a { color: rgba(255,255,255,0.75); text-decoration:none; }
  .s4l-footer-bottom a:hover { color:#fff; text-decoration: underline; }
</style>